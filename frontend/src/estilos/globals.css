/**
 * Estilos Globales - FELICITAFAC
 * Sistema de Facturación Electrónica para Perú
 * Estilos base y utilidades globales
 */

/* =======================================================
   IMPORTACIONES TAILWIND
   ======================================================= */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* =======================================================
   VARIABLES CSS PERSONALIZADAS
   ======================================================= */
:root {
  /* Colores del sistema FELICITAFAC */
  --color-primary: 59 130 246; /* blue-500 */
  --color-primary-foreground: 255 255 255;
  --color-secondary: 148 163 184; /* slate-400 */
  --color-secondary-foreground: 15 23 42; /* slate-900 */
  
  /* Colores de estado */
  --color-success: 34 197 94; /* green-500 */
  --color-warning: 251 191 36; /* amber-400 */
  --color-error: 239 68 68; /* red-500 */
  --color-info: 59 130 246; /* blue-500 */
  
  /* Colores de superficie */
  --color-background: 249 250 251; /* gray-50 */
  --color-foreground: 17 24 39; /* gray-900 */
  --color-card: 255 255 255;
  --color-card-foreground: 17 24 39;
  --color-popover: 255 255 255;
  --color-popover-foreground: 17 24 39;
  
  /* Colores de borde */
  --color-border: 229 231 235; /* gray-200 */
  --color-input: 229 231 235;
  --color-ring: 59 130 246;
  
  /* Colores de texto */
  --color-muted: 156 163 175; /* gray-400 */
  --color-muted-foreground: 107 114 128; /* gray-500 */
  --color-accent: 243 244 246; /* gray-100 */
  --color-accent-foreground: 17 24 39;
  --color-destructive: 239 68 68;
  --color-destructive-foreground: 255 255 255;
  
  /* Espaciado y sizing */
  --radius: 0.5rem;
  --header-height: 4rem;
  --sidebar-width: 16rem;
  --sidebar-width-collapsed: 4rem;
  
  /* Transiciones */
  --transition-fast: 150ms ease-in-out;
  --transition-normal: 200ms ease-in-out;
  --transition-slow: 300ms ease-in-out;
  
  /* Z-index layers */
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  --z-modal-backdrop: 1040;
  --z-modal: 1050;
  --z-popover: 1060;
  --z-tooltip: 1070;
  --z-toast: 1080;
}

/* Tema oscuro */
@media (prefers-color-scheme: dark) {
  :root {
    --color-background: 3 7 18; /* slate-950 */
    --color-foreground: 248 250 252; /* slate-50 */
    --color-card: 15 23 42; /* slate-900 */
    --color-card-foreground: 248 250 252;
    --color-popover: 15 23 42;
    --color-popover-foreground: 248 250 252;
    --color-border: 51 65 85; /* slate-700 */
    --color-input: 51 65 85;
    --color-muted: 100 116 139; /* slate-500 */
    --color-muted-foreground: 148 163 184; /* slate-400 */
    --color-accent: 30 41 59; /* slate-800 */
    --color-accent-foreground: 248 250 252;
  }
}

/* =======================================================
   RESET Y BASE STYLES
   ======================================================= */
@layer base {
  * {
    @apply border-border;
  }
  
  html {
    scroll-behavior: smooth;
    text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    @apply bg-background text-foreground font-sans;
    font-feature-settings: "rlig" 1, "calt" 1;
    margin: 0;
    padding: 0;
    min-height: 100vh;
  }
  
  /* Elementos de formulario */
  input, textarea, select, button {
    font-family: inherit;
    font-size: inherit;
  }
  
  /* Botones */
  button {
    cursor: pointer;
    border: none;
    background: none;
    padding: 0;
  }
  
  /* Enlaces */
  a {
    color: inherit;
    text-decoration: none;
  }
  
  a:hover {
    text-decoration: underline;
  }
  
  /* Listas */
  ul, ol {
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  /* Headings */
  h1, h2, h3, h4, h5, h6 {
    margin: 0;
    font-weight: 600;
    line-height: 1.2;
  }
  
  /* Párrafos */
  p {
    margin: 0;
    line-height: 1.6;
  }
  
  /* Imágenes */
  img {
    max-width: 100%;
    height: auto;
    display: block;
  }
  
  /* Tablas */
  table {
    border-collapse: collapse;
    width: 100%;
  }
  
  /* Focus visible */
  *:focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2;
  }
  
  /* Scrollbars */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  ::-webkit-scrollbar-track {
    @apply bg-gray-100;
  }
  
  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400;
  }
  
  /* Firefox scrollbars */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgb(203 213 225) rgb(241 245 249);
  }
}

/* =======================================================
   COMPONENTES REUTILIZABLES
   ======================================================= */
@layer components {
  /* Loading container inicial */
  .loading-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgb(249 250 251);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    transition: opacity var(--transition-slow);
  }
  
  .loading-container.fade-out {
    opacity: 0;
  }
  
  /* Container principal */
  .container {
    @apply mx-auto px-4 sm:px-6 lg:px-8;
    max-width: 1200px;
  }
  
  /* Layout admin */
  .admin-layout {
    @apply min-h-screen bg-gray-50;
    display: grid;
    grid-template-areas: 
      "sidebar header"
      "sidebar main";
    grid-template-columns: var(--sidebar-width) 1fr;
    grid-template-rows: var(--header-height) 1fr;
  }
  
  .admin-layout.sidebar-collapsed {
    grid-template-columns: var(--sidebar-width-collapsed) 1fr;
  }
  
  .admin-sidebar {
    grid-area: sidebar;
    @apply bg-white border-r border-gray-200;
    transition: width var(--transition-normal);
  }
  
  .admin-header {
    grid-area: header;
    @apply bg-white border-b border-gray-200;
  }
  
  .admin-main {
    grid-area: main;
    @apply overflow-auto;
  }
  
  /* Cards */
  .card {
    @apply bg-card text-card-foreground rounded-lg border border-border shadow-sm;
  }
  
  .card-hover {
    @apply transition-all duration-200 hover:shadow-md hover:border-gray-300;
  }
  
  /* Botones */
  .btn {
    @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
    @apply disabled:pointer-events-none disabled:opacity-50;
    min-height: 2.5rem;
    padding: 0.5rem 1rem;
  }
  
  .btn-primary {
    @apply bg-primary text-primary-foreground hover:bg-primary/90;
  }
  
  .btn-secondary {
    @apply bg-secondary text-secondary-foreground hover:bg-secondary/80;
  }
  
  .btn-outline {
    @apply border border-input bg-background hover:bg-accent hover:text-accent-foreground;
  }
  
  .btn-ghost {
    @apply hover:bg-accent hover:text-accent-foreground;
  }
  
  .btn-destructive {
    @apply bg-destructive text-destructive-foreground hover:bg-destructive/90;
  }
  
  /* Inputs */
  .input {
    @apply flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm;
    @apply ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium;
    @apply placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2;
    @apply focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
  }
  
  /* Badges */
  .badge {
    @apply inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold;
    @apply transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2;
  }
  
  .badge-default {
    @apply border-transparent bg-primary text-primary-foreground hover:bg-primary/80;
  }
  
  .badge-secondary {
    @apply border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80;
  }
  
  .badge-destructive {
    @apply border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80;
  }
  
  .badge-outline {
    @apply text-foreground;
  }
  
  /* Estados específicos para SUNAT */
  .estado-emitido {
    @apply bg-blue-100 text-blue-800 border-blue-200;
  }
  
  .estado-enviado {
    @apply bg-yellow-100 text-yellow-800 border-yellow-200;
  }
  
  .estado-aceptado {
    @apply bg-green-100 text-green-800 border-green-200;
  }
  
  .estado-rechazado {
    @apply bg-red-100 text-red-800 border-red-200;
  }
  
  .estado-anulado {
    @apply bg-gray-100 text-gray-800 border-gray-200;
  }
  
  /* Scrollbar personalizado */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgb(203 213 225) transparent;
  }
  
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400;
  }
}

/* =======================================================
   UTILIDADES PERSONALIZADAS
   ======================================================= */
@layer utilities {
  /* Text shadows */
  .text-shadow {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }
  
  .text-shadow-md {
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.12), 0 2px 4px rgba(0, 0, 0, 0.08);
  }
  
  .text-shadow-lg {
    text-shadow: 0 15px 30px rgba(0, 0, 0, 0.11), 0 5px 15px rgba(0, 0, 0, 0.08);
  }
  
  .text-shadow-none {
    text-shadow: none;
  }
  
  /* Gradientes */
  .gradient-blue {
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
  }
  
  .gradient-purple {
    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  }
  
  .gradient-green {
    background: linear-gradient(135deg, #10b981, #059669);
  }
  
  .gradient-felicitafac {
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  }
  
  /* Animaciones personalizadas */
  .animate-fade-in {
    animation: fadeIn 0.3s ease-in-out;
  }
  
  .animate-slide-in-right {
    animation: slideInRight 0.3s ease-out;
  }
  
  .animate-slide-in-left {
    animation: slideInLeft 0.3s ease-out;
  }
  
  .animate-bounce-in {
    animation: bounceIn 0.5s ease-out;
  }
  
  /* Layout utilities */
  .center-absolute {
    @apply absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2;
  }
  
  .center-flex {
    @apply flex items-center justify-center;
  }
  
  /* Responsive utilities específicas para admin */
  .admin-responsive-hide {
    @apply lg:block hidden;
  }
  
  .admin-mobile-only {
    @apply lg:hidden block;
  }
}

/* =======================================================
   ANIMACIONES KEYFRAMES
   ======================================================= */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInLeft {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes bounceIn {
  0% {
    transform: scale(0.3);
    opacity: 0;
  }
  50% {
    transform: scale(1.05);
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* =======================================================
   PRINT STYLES (Para impresión de documentos SUNAT)
   ======================================================= */
@media print {
  body {
    @apply text-black bg-white;
  }
  
  .no-print {
    display: none !important;
  }
  
  .print-only {
    display: block !important;
  }
  
  .card {
    @apply border border-gray-300 shadow-none;
    break-inside: avoid;
  }
  
  /* Tamaños específicos para documentos SUNAT */
  .print-a4 {
    width: 210mm;
    min-height: 297mm;
  }
  
  .print-ticket {
    width: 80mm;
    max-width: 80mm;
  }
}

/* =======================================================
   RESPONSIVE BREAKPOINTS PERSONALIZADOS
   ======================================================= */
@media (max-width: 640px) {
  .admin-layout {
    grid-template-areas: 
      "header"
      "main";
    grid-template-columns: 1fr;
    grid-template-rows: var(--header-height) 1fr;
  }
  
  .admin-sidebar {
    display: none;
  }
}

/* =======================================================
   MEJORAS DE ACCESIBILIDAD
   ======================================================= */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Focus visible mejorado para elementos interactivos */
.focus-ring {
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2;
}

/* Estados de carga para elementos específicos */
.loading {
  @apply opacity-50 pointer-events-none;
  position: relative;
}

.loading::after {
  content: '';
  @apply absolute inset-0 bg-white bg-opacity-50;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 12a9 9 0 11-6.219-8.56'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
  animation: spin 1s linear infinite;
}